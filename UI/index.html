<!DOCTYPE html>
  <html>
    <head>
      <meta charset="UTF-8">
      <title>Larze Neghar</title>
      <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
      <link rel="stylesheet" type="text/css" href="css/index.css">
      <link rel="stylesheet" type="text/css" href="css/main.css">
    </head>
    <body>
     <!--  <header>
        <nav class="topnav flex-row space-around" id="myTopnav">
             <a class="activeNav" href="index.html">Control Panel</a>
             <a href="Visualisation.html">Visualisation</a>
          </ul>
        </nav>
      </header> -->
      <div class="container" style="margin-top: 2%;max-width: 2000px;" id="app" xmlns="http://www.w3.org/1999/html">
<!-- Tab links -->
<div class="tab" style="direction: ltr;">
  <button class="tablinks active" id="defaultOpen" onclick="openCity(event, 'channels')">Channels Configuration/Monitoring</button>
  <button class="tablinks" onclick="openCity(event, 'Config')">EEW Configuration</button>
  <button class="tablinks" onclick="openCity(event, 'Charts')">Charts</button>
</div>
<!--   <div class="flex-row space-around">
    <a href="menuCategory.html" class="btn btn-primary">اضافه کردن دسته</a>
    <a href="" class="btn btn-primary">اضافه کردن غذا</a>
  </div>
  <hr/> -->
  <!-- channels -->
 <div id="channels" class="tabcontent"  style="display: block;">
   <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <th>Channel Number</th>
        <th>Router Number</th>
        <th>Unit Number</th>
        <th>Description</th>
        <th>Router Battery(%)</th>
        <th>Sensor Battery(%)</th>
        <th>Anten Signal</th>
       <!--  <th>LowPass Frequency</th>
        <th>HighPass Frequency</th> -->
        <th>Saving on Local</th>
        <!--         <th>Saving on Web</th>
        <th>Sending to Web</th> -->
      </tr>
    </thead>
    <tbody id="tableBody">
    </tbody>
  </table>
  <br/>
  <div class="flex-row space-around">
      <div class="form-group flex-row col-md-6">
          <label class="col-lg-3 col-md-4 col-sm-4">on Ground : </label>
          <select class="form-control col-lg-4 col-md-4 col-sm-6" id="groundPosition">
              <option id="groundPositionOption">-</option>
          </select>
      </div>
      <div class="form-group flex-row col-md-6">
          <label class="col-lg-3 col-md-4 col-sm-4">on Roof : </label>
          <select class="form-control col-lg-4 col-md-4 col-sm-6" id="roofPosition">
              <option id="roofPositionOption">-</option>
          </select>
      </div>
  </div>
  <!--<div class="flex-row space-around">-->
    <div class="form-check-inline">
      <label class="form-check-label">
        <input type="checkbox" class="form-check-input" id="activateAlgorithm" checked>Activate EEW during Test
     </label>
   </div>
   <br/>
   <button class="btn btn-success" id="saveSensorInfo" style="margin: auto;display: block;">Apply</button>
  <!--</div>-->
   <br/>
   <div class="flex-row space-around">
     <div class="row">
         <button class="btn btn-info" id="releaseAlarm">Release Alarm</button>
         <button class="btn btn-info ml-1" id="stopAlarm">Stop Alarm</button>      
     </div>
     <div>
         <button class="btn btn-info" id="colibrate">Colibrate</button>   
     </div>
     <div class="row">
       <button class="btn btn-info" id="runTest">Run Test</button>
       <button class="btn btn-info ml-1" id="stopTest">Stop Test</button> 
     </div>
   </div>
  <br/>
 </div>


 <!-- Config -->
 <div id="Config" class="tabcontent"> 
    <div class="flex-row space-around">
      <div class="flex-column">
        <br/><br/>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">Acc-treshold</label><input name="accTreshold" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Double</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">High Pass</label><input name="highPass" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Hz</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">Low Pass</label><input name="lowPass" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Hz</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">Long Point</label><input name="longPoint" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Integer</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">Short Point</label><input name="shortPoint" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Integer</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">Sta/Lta treshold</label><input name="staLtaTreshold" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Integer</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">Win length</label><input name="winLength" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Integer</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">a1</label><input name="a1" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Double</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">a2</label><input name="a2" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Double</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">a3</label><input name="a3" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Double</small>
        </div>
        <div class="flex-row flex-start flex-center-align" style="margin-bottom: 1%;">
          <label class="col-md-4">a4</label><input name="a4" class="form-control col-md-3" type="text" name="" value=""><small class="col-md-2">Double</small>
        </div>
      </div>
  
    </div>
    <br/>
   <button class="btn btn-success" id="configSubmit" style="margin: auto;display: block;">Submit</button>
  <br/>
 </div>

 <!-- Charts -->
 <div id="Charts" class="tabcontent">
    <div class="flex-column">
      <div class="flex-row space-around">
        <!-- charts -->
        <div style="width:80%; margin-right: 2%;">
         <div style="width:100%;">
            <canvas id="canvas"></canvas>
         </div>
         <div style="width:100%; margin-top: 2%;">
            <canvas id="FFTCanvas"></canvas>
         </div>
         <br/>
         <h3>Earthquake</h3>
           <div style="height: 400px;overflow-y: auto;">
            <table class="table table-striped table-responsive">
                <thead>
                <tr>
                   <!--  <th></th>
                    <th></th> -->
                    <th>Date-time</th>
                    <th>Estimated Magnitude</th>
                    <th>PGA-L1</th>
                    <th>PGA-L2</th>
                    <th>PGA-V</th>
                    <th>PBA-L1</th>
                    <th>PBA-L2</th>
                    <th>PBA-V</th>
                    <th>Description</th>
                </tr>
                </thead>
                <tbody id="tableEarthquake" >
                </tbody>
            </table>
            </div>
        </div>
        <!-- select charts -->
        <div class="flex-column" style="width: 15%;">
            <br/><br/><br/>
          <div class="row">
            <div class="form-group">
              <select class="form-control" id="firstChart">
                <option id="chart1Option">-</option>
              </select>
            </div>
            <div class="form-group">
             <select class="form-control ml-1" id="firstChartBordar">
               <option>X</option><option>Y</option><option>Z</option>
             </select>
            </div>
          </div>
          <div class="row">
            <div class="form-group">
             <select class="form-control" id="secondChart">
               <option id="chart2Option">-</option>
             </select>
            </div>
            <div class="form-group">
              <select class="form-control ml-1" id="secondChartBordar">
                <option>X</option><option>Y</option><option>Z</option>
             </select>
           </div>
          </div>
          <div class="row">
            <div class="form-group">
              <select class="form-control" id="thirdChart">
                <option id="chart3Option">-</option>
              </select>
            </div>
            <div class="form-group">
              <select class="form-control ml-1" id="thirdChartBordar">
                <option>X</option><option>Y</option><option>Z</option>
              </select>
            </div>
          </div>
          <!-- <button class="btn btn-info" id="applyChartSelect">Apply</button> -->
          <br/><br/><br/><br/><br/><br/>
          <div class="form-group">
             <label for="FFT">Window length for FFT</label>
             <input type="number" class="form-control" id="FFT" value="5">
          </div>
          <br/><br/><br/>
          <div class="form-group">
            <label for="frequencyRange" id="frequencyRangeValue">200 Hz</label>
            <input type="range" class="form-control-range" min="10" max="200" value="200" id="frequencyRange" />
          </div>
          <br/>
          <button class="btn btn-info" id="applyChartSelect">Apply</button>
        </div>
      </div>
    </div>
   <br/>
 </div>


</div>
      <!-- Insert this line above script imports  -->
<!-- <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script> -->

<!-- normal script imports etc  -->
<!-- <script src="js/jquery.js"></script>     -->
<!-- <script src="js/main.js"></script>     -->

<!-- Insert this line after script imports -->
<!-- <script>if (window.module) module = window.module;</script> -->

      <script type="text/javascript">
        function openCity(evt, cityName) {
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
      }

    // Get the element with id="defaultOpen" and click on it
    // document.getElementById("defaultOpen").click();
    window.$ = window.jQuery = require('./js/jquery.js');
    // window.$ = window.jQuery = require('jquery');
         // require("./js/jquery.js");
         // require("./js/dsp.js");
         require("./js/Chart.min.js");
         require("./js/utils.js");
         require("./js/main.js");
         require("./js/chartHandler.js"); 

       // var fft = new FFT(10, 10);
       // fft.forward([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
       // var spectrum = fft.spectrum;
       // console.log("FFT :");
       // console.log(spectrum);
      </script>
      <script>
          // require("./js/Chart.min.js");
          // require("./js/utils.js");


          // var counter = 0;
          // var times = [];
          // var data1 = [];
          // var data2 = [];
          // var data3 = [];

          // for(var i=0; i < 200 ; i++) {
          //     times.push("12:"+counter);
          //     data1.push(randomScalingFactor());
          //     data2.push(randomScalingFactor());
          //     data3.push(randomScalingFactor());
          //     counter = parseInt(counter) + 1 ;
          // }

          // var color = Chart.helpers.color;
          // var config = {
          //     type: 'line',
          //     data: {
          //         labels: times,
          //         datasets: [{
          //             label: 'My First dataset',
          //             backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
          //             borderColor: window.chartColors.red,
          //             fill: false,
          //             data: data1,
          //         }, {
          //             label: 'My Second dataset',
          //             backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
          //             borderColor: window.chartColors.blue,
          //             fill: false,
          //             data: data2,
          //         }, {
          //             label: 'Dataset with point data',
          //             backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
          //             borderColor: window.chartColors.green,
          //             fill: false,
          //             data: data3,
          //         }]
          //     },
          //     options: {
          //         title: {
          //             text: 'Chart.js Time Scale'
          //         },
          //         scales: {
          //             yAxes: [{
          //                 scaleLabel: {
          //                     display: true,
          //                     labelString: 'value'
          //                 }
          //             }]
          //         },
          //     }
          // };

          // window.onload = function() {
          //     var ctx = document.getElementById('canvas').getContext('2d');
          //     window.myLine = new Chart(ctx, config);

          // };

          // var myVar = setInterval(myTimer, 100);

          // function myTimer() {
          //     times.shift();
          //     data1.shift();
          //     data2.shift();
          //     data3.shift();
          //     times.push("12:"+counter);
          //     data1.push(randomScalingFactor());
          //     data2.push(randomScalingFactor());
          //     data3.push(randomScalingFactor());
          //     counter = parseInt(counter) + 1 ;
          //     if(counter%5 === 0) {
          //       window.myLine.update();  
          //     }
              
          // }

//          document.getElementById('randomizeData').addEventListener('click', function() {
//              config.data.datasets.forEach(function(dataset) {
//                  dataset.data.forEach(function(dataObj, j) {
//                      if (typeof dataObj === 'object') {
//                          dataObj.y = randomScalingFactor();
//                      } else {
//                          dataset.data[j] = randomScalingFactor();
//                      }
//                  });
//              });
//
//              window.myLine.update();
//          });

//          var colorNames = Object.keys(window.chartColors);
//          document.getElementById('addDataset').addEventListener('click', function() {
//              var colorName = colorNames[config.data.datasets.length % colorNames.length];
//              var newColor = window.chartColors[colorName];
//              var newDataset = {
//                  label: 'Dataset ' + config.data.datasets.length,
//                  borderColor: newColor,
//                  backgroundColor: color(newColor).alpha(0.5).rgbString(),
//                  data: [],
//              };
//
//              for (var index = 0; index < config.data.labels.length; ++index) {
//                  newDataset.data.push(randomScalingFactor());
//              }
//
//              config.data.datasets.push(newDataset);
//              window.myLine.update();
//          });

//          document.getElementById('addData').addEventListener('click', function() {
//              if (config.data.datasets.length > 0) {
//                  config.data.labels.push(newDate(config.data.labels.length));
//
//                  for (var index = 0; index < config.data.datasets.length; ++index) {
//                      if (typeof config.data.datasets[index].data[0] === 'object') {
//                          config.data.datasets[index].data.push({
//                              x: newDate(config.data.datasets[index].data.length),
//                              y: randomScalingFactor(),
//                          });
//                      } else {
//                          config.data.datasets[index].data.push(randomScalingFactor());
//                      }
//                  }
//
//                  window.myLine.update();
//              }
//          });

//          document.getElementById('removeDataset').addEventListener('click', function() {
//              config.data.datasets.splice(0, 1);
//              window.myLine.update();
//          });

//          document.getElementById('removeData').addEventListener('click', function() {
//              config.data.labels.splice(-1, 1); // remove the label first
//
//              config.data.datasets.forEach(function(dataset) {
//                  dataset.data.pop();
//              });
//
//              window.myLine.update();
//          });
      </script>
    </body>
  </html>
